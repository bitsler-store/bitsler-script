<!DOCTYPE html><html><head>
<meta charset="utf-8"><title>Crypto Payment</title>
<link rel="stylesheet" href="style.css">
</head><body>
<div class="container center">
const cEl = document.getElementById("c");
const oidEl = document.getElementById("oid");
const emEl = document.getElementById("em");
const addr = document.getElementById("addr");
const net = document.getElementById("net");
const amt = document.getElementById("amt");
const t = document.getElementById("t");
const qr = document.getElementById("qr");


<div id="amt" class="price"></div>

<div class="box" id="addr"></div>
<button class="btn" onclick="copy()">Copy address</button>

<img id="qr" width="180">
<p id="net"></p>
<p class="timer red">Time left: <span id="t"></span></p>
</div>

<script src="script.js"></script>
<script>
(async()=>{
  const p=new URLSearchParams(location.search);
  const c=p.get("c"), e=p.get("e");
  if(!wallets[c]||!e) return location.href="index.html";
  const oid=uid();
  const ip=await getIP();
  const start=Date.now();

  localStorage.setItem("order_"+oid,JSON.stringify({
    oid,email:e,crypto:c,start,ip:ip.ip,country:ip.country_name,status:"pending"
  }));

  cEl.textContent=c; oidEl.textContent=oid; emEl.textContent=e;
  addr.textContent=wallets[c].addr;
  net.textContent="Network: "+wallets[c].net;

  const a=await getAmount(c);
  amt.textContent=`Send ${a} ${c}`;
  qr.src=`https://api.qrserver.com/v1/create-qr-code/?data=${wallets[c].addr}`;

  let s=EXPIRATION_MIN*60;
  setInterval(()=>{
    t.textContent=`${Math.floor(s/60)}:${String(s%60).padStart(2,'0')}`;
    if(--s<0){
      const o=JSON.parse(localStorage.getItem("order_"+oid));
      o.status="expired"; localStorage.setItem("order_"+oid,JSON.stringify(o));
      location.href="expired.html";
    }
  },1000);

  window.copy=()=>{navigator.clipboard.writeText(wallets[c].addr);alert("Copied")}
})();
</script>
</body></html>
